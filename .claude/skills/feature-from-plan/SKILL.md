name: feature-from-plan
description: Systematically implement features from structured Claude.ai Project prompts. Creates implementation checklist, executes step-by-step with validation, tracks progress. Use when you have a detailed feature prompt from the Feature Planner workflow.
---

# Feature-from-Plan Skill

This skill helps you implement features generated by the Claude.ai Feature Planner Project following the boilerplate's two-stage workflow.

## When to Use

Use this skill when you have a structured feature prompt that includes:
- CONTEXT section
- REQUIREMENTS section
- IMPLEMENTATION PLAN section
- FILES TO CREATE section
- VALIDATION CHECKLIST section

Typically generated by the Claude.ai Feature Planner Project.

## What This Skill Does

1. Parses the structured prompt
2. Creates plan.md with implementation checklist
3. Executes step-by-step
4. Validates after each major component
5. Tracks progress
6. Runs tests systematically
7. Provides final validation report

## How to Use
```
Use the feature-from-plan skill to implement this:

[Paste your structured feature prompt from Claude.ai Project]
```

## Implementation Process

### Step 1: Parse and Plan

The skill will:
- Extract all sections from the prompt
- Identify database architecture (PostgreSQL / MongoDB / Both)
- Create plan.md with checklist
- Show you the plan for approval

### Step 2: Systematic Execution

After plan approval, the skill executes in this order:

**Database Layer:**
1. Create PostgreSQL models (if needed)
2. Create MongoDB documents (if needed)
3. Create database migration (if PostgreSQL)
4. Apply migration

**Data Access Layer:**
5. Create repository
6. Implement custom queries

**Business Logic Layer:**
7. Create service
8. Implement validation and business rules

**API Layer:**
9. Create schemas (Pydantic DTOs)
10. Create API router
11. Add permissions (if new permissions needed)
12. Register router

**Testing:**
13. Create test file
14. Implement all test cases from prompt
15. Run tests: `uv run pytest [test_file] -v`

**Validation:**
16. Check all items in VALIDATION CHECKLIST
17. Run full test suite: `uv run test`
18. Verify API endpoints work

### Step 3: Progress Tracking

The skill maintains plan.md with checkboxes:
```markdown
# Feature Implementation: [Feature Name]

## Progress

Database Layer:
- [x] PostgreSQL models created
- [x] Migration generated
- [x] Migration applied
- [ ] MongoDB documents created

Data Access:
- [x] Repository created
- [x] Custom queries implemented

...

## Current Step
Implementing service layer...

## Notes
- Migration included user_id index
- Added validation for email format
```

### Step 4: Validation

After implementation, the skill:
- Runs all tests
- Checks validation checklist
- Verifies files created
- Confirms migrations applied
- Reports any issues

## Example Usage

### Simple CRUD Feature
```
Use the feature-from-plan skill to implement this:

Implement Tags feature for item organization (PostgreSQL).

CONTEXT:
Users create custom tags to organize items.

REQUIREMENTS:
1. Max 50 tags per user
2. Tags: name, color (hex)
3. Many-to-many with items

[... rest of structured prompt ...]
```

The skill will:
1. Show plan with 8 steps
2. Execute each step
3. Update plan.md with progress
4. Run tests after service layer
5. Final validation

### Dual-Database Feature
```
Use the feature-from-plan skill to implement this:

Implement Activity Tracking with MongoDB.

DATABASE CHOICE:
MongoDB - High write volume, flexible schema

[... rest of prompt ...]
```

The skill recognizes MongoDB-specific implementation:
- No migration step
- Register document in init_mongodb
- MongoDB repository pattern

### Complex Multi-Phase Feature
```
Use the feature-from-plan skill to implement this:

Phase 1: Stripe Checkout Integration

[... Phase 1 prompt ...]
```

After Phase 1 completion:
```
Use the feature-from-plan skill to implement Phase 2:

Phase 2: Webhook Handling

[... Phase 2 prompt ...]
```

Each phase tracked separately.

## Key Features

### Automatic Test Running

The skill runs tests at strategic points:
- After repository implementation
- After service implementation
- After API implementation
- Final full test suite

**If tests fail:**
- Shows failure details
- Suggests fixes based on error messages
- Re-runs after fixes

### Migration Handling

For PostgreSQL features:
- Generates migration automatically
- Shows migration file for review
- Prompts for approval before applying
- Applies migration
- Verifies in database

### Error Recovery

If implementation fails mid-way:
- plan.md preserves progress
- You can resume from last successful step
- Provides context for debugging

### Dual-Database Awareness

Recognizes when features use:
- PostgreSQL only
- MongoDB only  
- Both (Unit of Work)

Adjusts implementation steps accordingly.

## Tips for Best Results

### Before Using the Skill:

1. Make sure prompt is from Claude.ai Feature Planner
2. Review the prompt yourself first
3. Understand the feature requirements
4. Have tests database running: `docker compose up -d postgres mongodb`

### During Execution:

1. Review plan.md before approving
2. Watch for test failures (skill will pause)
3. Check migration files before applying
4. Verify API endpoints manually if unsure

### After Completion:

1. Review plan.md for notes
2. Test API endpoints manually: `/docs`
3. Check database tables/collections
4. Update project knowledge in Claude.ai Project

## Troubleshooting

### "Can't parse the prompt structure"

**Cause:** Prompt doesn't have expected sections

**Solution:** Make sure prompt includes:
- CONTEXT
- REQUIREMENTS
- IMPLEMENTATION PLAN
- FILES TO CREATE

### "Tests failing after implementation"

**Skill behavior:**
- Shows test output
- Analyzes failures
- Suggests fixes
- Re-runs tests

**Your action:**
- Review suggested fixes
- Approve fixes
- Or provide different approach

### "Migration not applying"

**Skill checks:**
- Database connection
- Migration syntax
- Conflicts with existing schema

**Provides:**
- Error message
- Suggested fixes
- Option to skip and continue

### "Feature partially implemented"

**Check plan.md:**
- See which steps completed
- Resume from last checkpoint
- Or start over with `/clear`

## Integration with Workflow

This skill is designed for the two-stage workflow:
```
Stage 1 (Claude.ai Project):
User describes feature
→ Project generates structured prompt

Stage 2 (Claude Code):
Copy prompt to Claude Code
→ "Use feature-from-plan skill to implement this: [prompt]"
→ Skill executes systematically
→ Feature completed
```

**Benefits:**
- Reduces errors
- Ensures pattern compliance
- Tracks progress
- Validates thoroughly
- Saves tokens (systematic vs trial-and-error)

## Advanced Usage

### Custom Validation

Add custom validation steps to the prompt:
```
CUSTOM VALIDATION:
- [ ] API returns proper pagination
- [ ] Caching works correctly
- [ ] Rate limiting functional
```

The skill includes these in validation checklist.

### Phase Dependencies

For multi-phase features:
```
Phase 2 Dependencies:
- Requires Phase 1 completion
- Database: users table with stripe_customer_id
- Files: app/services/stripe_client.py
```

The skill verifies dependencies before starting.

## Output Example

After successful implementation:
```
Feature Implementation Complete: Tags

Summary:
- Files created: 6
- Tests written: 8
- Tests passing: 8/8
- Migration applied: Yes
- API endpoints working: Yes

Files Created:
✓ app/models/postgres/tag.py
✓ app/repositories/tag_repo.py
✓ app/services/tag_service.py
✓ app/schemas/tag.py
✓ app/api/v1/tags.py
✓ tests/integration/test_tags.py

Validation Checklist: All items checked

Next Steps:
1. Test API manually: http://localhost:8000/docs
2. Update Claude.ai Project knowledge
3. Document any deviations from plan

Plan details saved in: plan.md
```

## Skill Maintenance

This skill follows the boilerplate patterns. If patterns change:

1. Update this SKILL.md
2. Test with sample features
3. Document changes in plan.md template

## Related Resources

- Feature Workflow Guide: docs/FEATURE_WORKFLOW.md
- Claude.ai Project Setup: docs/CLAUDE_PROJECT_SETUP.md
- Example Prompts: docs/EXAMPLE_USAGE.md
- Boilerplate Structure: docs/prompts/boilerplate-structure.md
